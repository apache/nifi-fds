{"version":3,"file":"covalent-core-side-sheet.js","sources":["../../../../src/platform/core/side-sheet/side-sheet.animation.ts","../../../../src/platform/core/side-sheet/side-sheet.config.ts","../../../../src/platform/core/side-sheet/side-sheet-container.ts","../../../../src/platform/core/side-sheet/side-sheet-ref.ts","../../../../src/platform/core/side-sheet/side-sheet.ts","../../../../src/platform/core/side-sheet/side-sheet.content-directives.ts","../../../../src/platform/core/side-sheet/side-sheet.module.ts"],"sourcesContent":["import { animate, state, style, transition, trigger, AnimationTriggerMetadata } from '@angular/animations';\nimport { AnimationCurves, AnimationDurations } from '@angular/material/core';\n\nexport const tdSideSheetAnimations: {\n  readonly sideSheetContainer: AnimationTriggerMetadata;\n} = {\n  /** Animation that is applied on the side-sheet container by default. */\n  sideSheetContainer: trigger('sideSheetContainer', [\n    state('void, exit', style({ transform: 'translateX(100%)' })),\n    state('enter', style({ transform: 'translateX(0%)', opacity: 1 })),\n    transition(\n      '* => enter',\n      animate(\n        `${AnimationDurations.ENTERING} ${AnimationCurves.ACCELERATION_CURVE}`,\n        style({ transform: 'translateX(0)', opacity: 1 }),\n      ),\n    ),\n    transition(\n      '* => void, * => exit',\n      animate(\n        `${AnimationDurations.EXITING} ${AnimationCurves.ACCELERATION_CURVE}`,\n        style({ transform: 'translateX(100%)' }),\n      ),\n    ),\n  ]),\n};\n","import { MatDialogConfig } from '@angular/material/dialog';\n\nexport class CovalentSideSheetConfig<D = any> extends MatDialogConfig<D> {}\n","/* tslint:disable */\nimport { AnimationEvent } from '@angular/animations';\nimport { FocusMonitor, FocusOrigin, FocusTrap, FocusTrapFactory } from '@angular/cdk/a11y';\nimport { BasePortalOutlet, CdkPortalOutlet, ComponentPortal, DomPortal, TemplatePortal } from '@angular/cdk/portal';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EmbeddedViewRef,\n  EventEmitter,\n  Inject,\n  Optional,\n  ViewChild,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { tdSideSheetAnimations } from './side-sheet.animation';\nimport { CovalentSideSheetConfig } from './side-sheet.config';\n\nexport function _getFocusedElementPierceShadowDom(): HTMLElement | null {\n  let activeElement =\n    typeof document !== 'undefined' && document ? (document.activeElement as HTMLElement | null) : null;\n\n  while (activeElement && activeElement.shadowRoot) {\n    const newActiveElement = activeElement.shadowRoot.activeElement as HTMLElement | null;\n    if (newActiveElement === activeElement) {\n      break;\n    } else {\n      activeElement = newActiveElement;\n    }\n  }\n\n  return activeElement;\n}\n\n/**\n * Base class for the `CovalentSideSheetContainer`. The base class does not implement\n * animations as these are left to implementers of the side-sheet container.\n */\n@Directive()\nexport abstract class _CovalentSideSheetContainerBase extends BasePortalOutlet {\n  protected _document: Document;\n\n  /** The portal outlet inside of this container into which the side-sheet content will be loaded. */\n  @ViewChild(CdkPortalOutlet, { static: true }) _portalOutlet: CdkPortalOutlet;\n\n  /** The class that traps and manages focus within the side-sheet. */\n  private _focusTrap: FocusTrap;\n\n  /** Emits when an animation state changes. */\n  _animationStateChanged = new EventEmitter<{\n    state: 'opened' | 'opening' | 'closing' | 'closed';\n    totalTime: number;\n  }>();\n\n  /** Element that was focused before the side-sheet was opened. Save this to restore upon close. */\n  private _elementFocusedBeforeSideSheetWasOpened: HTMLElement | null = null;\n\n  /**\n   * Type of interaction that led to the side-sheet being closed. This is used to determine\n   * whether the focus style will be applied when returning focus to its original location\n   * after the side-sheet is closed.\n   */\n  _closeInteractionType: FocusOrigin | null = null;\n\n  /** ID of the element that should be considered as the side-sheet's label. */\n  _ariaLabelledBy: string | null;\n\n  /** ID for the container DOM element. */\n  _id: string;\n\n  constructor(\n    protected _elementRef: ElementRef,\n    protected _focusTrapFactory: FocusTrapFactory,\n    protected _changeDetectorRef: ChangeDetectorRef,\n    @Optional() @Inject(DOCUMENT) _document: any,\n    /** The side-sheet configuration. */\n    public _config: CovalentSideSheetConfig,\n    private _focusMonitor?: FocusMonitor,\n  ) {\n    super();\n    this._ariaLabelledBy = _config.ariaLabelledBy || null;\n    this._document = _document;\n  }\n\n  /** Starts the side-sheet exit animation. */\n  abstract _startExitAnimation(): void;\n\n  /** Initializes the side-sheet container with the attached content. */\n  _initializeWithAttachedContent() {\n    this._setupFocusTrap();\n    // Save the previously focused element. This element will be re-focused\n    // when the side-sheet closes.\n    this._capturePreviouslyFocusedElement();\n  }\n\n  /**\n   * Attach a ComponentPortal as content to this side-sheet container.\n   * @param portal Portal to be attached as the side-sheet content.\n   */\n  attachComponentPortal<T>(portal: ComponentPortal<T>): ComponentRef<T> {\n    return this._portalOutlet.attachComponentPortal(portal);\n  }\n\n  /**\n   * Attach a TemplatePortal as content to this side-sheet container.\n   * @param portal Portal to be attached as the side-sheet content.\n   */\n  attachTemplatePortal<C>(portal: TemplatePortal<C>): EmbeddedViewRef<C> {\n    return this._portalOutlet.attachTemplatePortal(portal);\n  }\n\n  /**\n   * Attaches a DOM portal to the side-sheet container.\n   * @param portal Portal to be attached.\n   * @deprecated To be turned into a method.\n   */\n  attachDomPortal = (portal: DomPortal) => {\n    return this._portalOutlet.attachDomPortal(portal);\n  };\n\n  /** Moves focus back into the side-sheet if it was moved out. */\n  _recaptureFocus() {\n    if (!this._containsFocus()) {\n      this._trapFocus();\n    }\n  }\n\n  /**\n   * Moves the focus inside the focus trap. When autoFocus is not set to 'side-sheet', if focus\n   * cannot be moved then focus will go to the side-sheet container.\n   */\n  protected _trapFocus() {\n    const element = this._elementRef.nativeElement;\n    if (!this._config.autoFocus) {\n      if (!this._containsFocus()) {\n        element.focus();\n      }\n    } else {\n      this._focusTrap.focusInitialElementWhenReady().then((focusedSuccessfully) => {\n        // If we weren't able to find a focusable element in the side-sheet, then focus the side-sheet\n        // container instead.\n        if (!focusedSuccessfully) {\n          this._focusSideSheetContainer();\n        }\n      });\n    }\n  }\n\n  /** Restores focus to the element that was focused before the side-sheet opened. */\n  protected _restoreFocus() {\n    const previousElement = this._elementFocusedBeforeSideSheetWasOpened;\n\n    // We need the extra check, because IE can set the `activeElement` to null in some cases.\n    if (this._config.restoreFocus && previousElement && typeof previousElement.focus === 'function') {\n      const activeElement = _getFocusedElementPierceShadowDom();\n      const element = this._elementRef.nativeElement;\n\n      // Make sure that focus is still inside the side-sheet or is on the body (usually because a\n      // non-focusable element like the backdrop was clicked) before moving it. It's possible that\n      // the consumer moved it themselves before the animation was done, in which case we shouldn't\n      // do anything.\n      if (\n        !activeElement ||\n        activeElement === this._document.body ||\n        activeElement === element ||\n        element.contains(activeElement)\n      ) {\n        if (this._focusMonitor) {\n          this._focusMonitor.focusVia(previousElement, this._closeInteractionType);\n          this._closeInteractionType = null;\n        } else {\n          previousElement.focus();\n        }\n      }\n    }\n\n    if (this._focusTrap) {\n      this._focusTrap.destroy();\n    }\n  }\n\n  /** Sets up the focus trap. */\n  private _setupFocusTrap() {\n    this._focusTrap = this._focusTrapFactory.create(this._elementRef.nativeElement);\n  }\n\n  /** Captures the element that was focused before the side-sheet was opened. */\n  private _capturePreviouslyFocusedElement() {\n    if (this._document) {\n      this._elementFocusedBeforeSideSheetWasOpened = _getFocusedElementPierceShadowDom();\n    }\n  }\n\n  /** Focuses the side-sheet container. */\n  private _focusSideSheetContainer() {\n    // Note that there is no focus method when rendering on the server.\n    if (this._elementRef.nativeElement.focus) {\n      this._elementRef.nativeElement.focus();\n    }\n  }\n\n  /** Returns whether focus is inside the side-sheet. */\n  private _containsFocus() {\n    const element = this._elementRef.nativeElement;\n    const activeElement = _getFocusedElementPierceShadowDom();\n    return element === activeElement || element.contains(activeElement);\n  }\n}\n\n/**\n * Internal component that wraps the generated side-sheet content.\n * This animation below is the only reason for duplicating most of the Material dialog code\n */\n@Component({\n  selector: 'td-side-sheet-container',\n  template: `\n    <ng-template cdkPortalOutlet></ng-template>\n  `,\n  styleUrls: ['side-sheet.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.Default,\n  animations: [tdSideSheetAnimations.sideSheetContainer],\n  host: {\n    'class': 'td-side-sheet-container',\n    'tabindex': '-1',\n    'aria-modal': 'true',\n    '[id]': '_id',\n    '[attr.role]': '_config.role',\n    '[attr.aria-labelledby]': '_config.ariaLabel ? null : _ariaLabelledBy',\n    '[attr.aria-label]': '_config.ariaLabel',\n    '[attr.aria-describedby]': '_config.ariaDescribedBy || null',\n    '[@sideSheetContainer]': '_state',\n    '(@sideSheetContainer.start)': '_onAnimationStart($event)',\n    '(@sideSheetContainer.done)': '_onAnimationDone($event)',\n  },\n})\nexport class CovalentSideSheetContainer extends _CovalentSideSheetContainerBase {\n  /** State of the side-sheet animation. */\n  _state: 'void' | 'enter' | 'exit' = 'enter';\n\n  /** Callback, invoked whenever an animation on the host completes. */\n  _onAnimationDone({ toState, totalTime }: AnimationEvent) {\n    if (toState === 'enter') {\n      this._trapFocus();\n      this._animationStateChanged.next({ state: 'opened', totalTime });\n    } else if (toState === 'exit') {\n      this._restoreFocus();\n      this._animationStateChanged.next({ state: 'closed', totalTime });\n    }\n  }\n\n  /** Callback, invoked when an animation on the host starts. */\n  _onAnimationStart({ toState, totalTime }: AnimationEvent) {\n    if (toState === 'enter') {\n      this._animationStateChanged.next({ state: 'opening', totalTime });\n    } else if (toState === 'exit' || toState === 'void') {\n      this._animationStateChanged.next({ state: 'closing', totalTime });\n    }\n  }\n\n  /** Starts the side-sheet exit animation. */\n  _startExitAnimation(): void {\n    this._state = 'exit';\n    this._changeDetectorRef.markForCheck();\n  }\n}\n","/* tslint:disable */\nimport { FocusOrigin } from '@angular/cdk/a11y';\nimport { OverlayRef } from '@angular/cdk/overlay';\nimport { MatDialogRef, _MatDialogContainerBase } from '@angular/material/dialog';\n\n// Counter for unique dialog ids.\nlet uniqueId = 0;\n\n// Create a new side sheet ref to change the id of the ref\nexport class CovalentSideSheetRef<T, R = any> extends MatDialogRef<T, R> {\n  constructor(\n    public overlayRef: OverlayRef,\n    public _containerInstance: _MatDialogContainerBase,\n    readonly id: string = `td-side-sheet-${uniqueId++}`,\n  ) {\n    super(overlayRef, _containerInstance, id);\n  }\n}\n\nexport function _closeSideSheetVia<R>(ref: CovalentSideSheetRef<R>, interactionType: FocusOrigin, result?: R) {\n  // Some mock dialog ref instances in tests do not have the `_containerInstance` property.\n  // For those, we keep the behavior as is and do not deal with the interaction type.\n  if (ref._containerInstance !== undefined) {\n    ref._containerInstance._closeInteractionType = interactionType;\n  }\n  return ref.close(result);\n}\n","/* tslint:disable */\nimport {\n  Directive,\n  Inject,\n  Injectable,\n  InjectFlags,\n  InjectionToken,\n  Injector,\n  OnDestroy,\n  Optional,\n  SkipSelf,\n  StaticProvider,\n  TemplateRef,\n  Type,\n} from '@angular/core';\nimport { Overlay, OverlayConfig, OverlayRef, GlobalPositionStrategy } from '@angular/cdk/overlay';\nimport { ComponentPortal, ComponentType, TemplatePortal } from '@angular/cdk/portal';\nimport { MAT_DIALOG_DATA, MAT_DIALOG_DEFAULT_OPTIONS, _MatDialogContainerBase } from '@angular/material/dialog';\nimport { AnimationCurves, AnimationDurations } from '@angular/material/core';\nimport { CovalentSideSheetContainer, _CovalentSideSheetContainerBase } from './side-sheet-container';\nimport { Subject, Subscription, of } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\nimport { Directionality } from '@angular/cdk/bidi';\n\nimport { CovalentSideSheetRef } from './side-sheet-ref';\nimport { CovalentSideSheetConfig } from './side-sheet.config';\n\n@Directive()\nexport class _CovalentSideSheetBase<C extends _CovalentSideSheetContainerBase> implements OnDestroy {\n  private _openSideSheetsAtThisLevel: CovalentSideSheetRef<unknown>[] = [];\n  private readonly _afterAllClosedAtThisLevel = new Subject<void>();\n  private readonly _afterOpenedAtThisLevel = new Subject<CovalentSideSheetRef<unknown>>();\n  private _animationStateSubscriptions: Subscription;\n\n  private defaultSidebarConfig = {\n    minWidth: '400px',\n    maxWidth: '100vw',\n  };\n\n  constructor(\n    private _overlay: Overlay,\n    private _injector: Injector,\n    private _defaultOptions: CovalentSideSheetConfig | undefined,\n    private _parentSideSheet: _CovalentSideSheetBase<C> | undefined,\n    private _sideSheetRefConstructor: Type<CovalentSideSheetRef<any>>,\n    private _sideSheetContainerType: Type<C>,\n    private _sideSheetDataToken: InjectionToken<unknown>,\n  ) {}\n\n  /** Keeps track of the currently-open side-sheets. */\n  get openSideSheets(): CovalentSideSheetRef<unknown>[] {\n    return this._parentSideSheet ? this._parentSideSheet.openSideSheets : this._openSideSheetsAtThisLevel;\n  }\n\n  open<T, D = unknown, R = unknown>(\n    componentOrTemplateRef: ComponentType<T> | TemplateRef<T>,\n    config?: CovalentSideSheetConfig<D>,\n  ): CovalentSideSheetRef<T, R> {\n    config = { ...(this._defaultOptions || new CovalentSideSheetConfig()), ...this.defaultSidebarConfig, ...config };\n\n    const overlayRef = this._createOverlay(config);\n    const sideSheetContainer = this._attachSideSheetContainer(overlayRef, config);\n    const sideSheetRef = this._attachSideSheetContent<T, R>(\n      componentOrTemplateRef,\n      sideSheetContainer,\n      overlayRef,\n      config,\n    );\n    const prevSideSheetRef: CovalentSideSheetRef<unknown> = this.openSideSheets.slice(-1)[0];\n    const prevOverlayRef = prevSideSheetRef?.overlayRef;\n\n    // Animate previous side sheet to full width\n    if (prevOverlayRef?.overlayElement) {\n      prevOverlayRef.overlayElement.style.transition = `${AnimationDurations.COMPLEX} ${AnimationCurves.DECELERATION_CURVE}`;\n      prevOverlayRef.overlayElement.style.minWidth = `${(window as any).innerWidth}px`;\n    }\n\n    // Revert the previous side sheet config & size\n    sideSheetRef._containerInstance._animationStateChanged\n      .pipe(\n        filter((event) => event.state === 'closing' && !!(prevSideSheetRef && prevOverlayRef)),\n        take(1),\n      )\n      .subscribe(() => {\n        prevOverlayRef.overlayElement.style.transition = `${AnimationDurations.EXITING} ${AnimationCurves.DECELERATION_CURVE}`;\n        prevSideSheetRef.updateSize();\n      });\n\n    // Add new side sheet to open list\n    this.openSideSheets.push(sideSheetRef);\n\n    // Remove side sheet ref after closed\n    sideSheetRef\n      .afterClosed()\n      .pipe(take(1))\n      .subscribe(() => this._removeOpenSideSheet(sideSheetRef));\n\n    // Notify the side-sheet container that the content has been attached.\n    sideSheetContainer._initializeWithAttachedContent();\n\n    return sideSheetRef;\n  }\n\n  ngOnDestroy() {\n    // Only close the side-sheets at this level on destroy\n    // since the parent service may still be active.\n    this._closeSideSheets(this._openSideSheetsAtThisLevel);\n    this._afterAllClosedAtThisLevel.complete();\n    this._afterOpenedAtThisLevel.complete();\n    // Clean up any subscriptions to side-sheet that never finished opening.\n    if (this._animationStateSubscriptions) {\n      this._animationStateSubscriptions.unsubscribe();\n    }\n  }\n\n  /**\n   * Closes all of the currently-open side-sheets.\n   */\n  closeAll(): void {\n    this._closeSideSheets(this.openSideSheets);\n  }\n\n  private _createOverlay<T>(config): OverlayRef {\n    const overlayConfig = new OverlayConfig({\n      positionStrategy: this._overlay.position().global(),\n      scrollStrategy: this._overlay.scrollStrategies.block(),\n      panelClass: config.panelClass,\n      hasBackdrop: config.hasBackdrop,\n      direction: config.direction,\n      minWidth: config.minWidth,\n      minHeight: config.minHeight,\n      maxWidth: config.maxWidth,\n    });\n    const overlayRef = this._overlay.create(overlayConfig);\n    const positionStrategy = overlayRef.getConfig().positionStrategy as GlobalPositionStrategy;\n    positionStrategy.right('0px');\n\n    return overlayRef;\n  }\n\n  /**\n   * Attaches a container to a side-sheets's already-created overlay.\n   * @param overlay Reference to the side-sheet's underlying overlay.\n   * @param config The side-sheet configuration.\n   * @returns A promise resolving to a ComponentRef for the attached container.\n   */\n  private _attachSideSheetContainer(overlay: OverlayRef, config: CovalentSideSheetConfig): C {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injector = Injector.create({\n      parent: userInjector || this._injector,\n      providers: [{ provide: CovalentSideSheetConfig, useValue: config }],\n    });\n\n    const containerPortal = new ComponentPortal(\n      this._sideSheetContainerType,\n      config.viewContainerRef,\n      injector,\n      config.componentFactoryResolver,\n    );\n    const containerRef = overlay.attach<C>(containerPortal);\n\n    return containerRef.instance;\n  }\n\n  /**\n   * Attaches the user-provided component to the already-created side sheet container.\n   * @param componentOrTemplateRef The type of component being loaded into the side-sheet,\n   *     or a TemplateRef to instantiate as the content.\n   * @param dialogContainer Reference to the wrapping side-sheet container.\n   * @param overlayRef Reference to the overlay in which the side-sheet resides.\n   * @param config The side-sheet configuration.\n   * @returns A promise resolving to the CovalentSideSheetRef that should be returned to the user.\n   */\n  private _attachSideSheetContent<T, R>(\n    componentOrTemplateRef: ComponentType<T> | TemplateRef<T>,\n    sideSheetContainer: C,\n    overlayRef: OverlayRef,\n    config: CovalentSideSheetConfig,\n  ): CovalentSideSheetRef<T, R> {\n    // Create a reference to the side-sheet we're creating in order to give the user a handle\n    // to modify and close it.\n    const sideSheetRef = new this._sideSheetRefConstructor(overlayRef, sideSheetContainer, config.id);\n\n    if (componentOrTemplateRef instanceof TemplateRef) {\n      sideSheetContainer.attachTemplatePortal(\n        new TemplatePortal<T>(componentOrTemplateRef, null!, <any>{\n          $implicit: config.data,\n          sideSheetRef,\n        }),\n      );\n    } else {\n      const injector = this._createInjector<T>(config, sideSheetRef, sideSheetContainer);\n      const contentRef = sideSheetContainer.attach<T>(\n        new ComponentPortal(componentOrTemplateRef, config.viewContainerRef, injector),\n      );\n      sideSheetRef.componentInstance = contentRef.instance;\n    }\n\n    sideSheetRef.updateSize(config.width, config.height);\n\n    return sideSheetRef;\n  }\n\n  private _createInjector<T>(\n    config: CovalentSideSheetConfig,\n    sideSheetRef: CovalentSideSheetRef<T>,\n    sideSheetContainer: C,\n  ): Injector {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n\n    // The side-sheet container should be provided as the side-sheet container and the side-sheet's\n    // content are created out of the same `ViewContainerRef` and as such, are siblings\n    // for injector purposes. To allow the hierarchy that is expected, the side-sheet\n    // container is explicitly provided in the injector.\n    const providers: StaticProvider[] = [\n      { provide: this._sideSheetContainerType, useValue: sideSheetContainer },\n      { provide: this._sideSheetDataToken, useValue: config.data },\n      { provide: this._sideSheetRefConstructor, useValue: sideSheetRef },\n    ];\n\n    if (\n      config.direction &&\n      (!userInjector || !userInjector.get<Directionality | null>(Directionality, null, InjectFlags.Optional))\n    ) {\n      providers.push({\n        provide: Directionality,\n        useValue: { value: config.direction, change: of() },\n      });\n    }\n\n    return Injector.create({ parent: userInjector || this._injector, providers });\n  }\n\n  /**\n   * Removes a side sheet from the array of open side sheets.\n   * @param sideSheetRef Side Sheet to be removed.\n   */\n  private _removeOpenSideSheet(sideSheetRef: CovalentSideSheetRef<unknown>) {\n    const index = this.openSideSheets.indexOf(sideSheetRef);\n\n    if (index > -1) {\n      this.openSideSheets.splice(index, 1);\n    }\n  }\n\n  /** Closes all of the side-sheet in an array. */\n  private _closeSideSheets(sideSheets: CovalentSideSheetRef<any>[]) {\n    let i = sideSheets.length;\n\n    while (i--) {\n      sideSheets[i].close();\n    }\n  }\n}\n\n/**\n * Service to open Covalent Design side-sheet.\n */\n@Injectable()\nexport class CovalentSideSheet extends _CovalentSideSheetBase<CovalentSideSheetContainer> {\n  constructor(\n    overlay: Overlay,\n    injector: Injector,\n    @Optional() @Inject(MAT_DIALOG_DEFAULT_OPTIONS) defaultOptions: CovalentSideSheetConfig,\n    @Optional() @SkipSelf() parentSideSheet: CovalentSideSheet,\n  ) {\n    super(\n      overlay,\n      injector,\n      defaultOptions,\n      parentSideSheet,\n      CovalentSideSheetRef,\n      CovalentSideSheetContainer,\n      MAT_DIALOG_DATA,\n    );\n  }\n}\n","/* tslint:disable */\nimport { Directive, Input, OnChanges, OnInit, Optional, SimpleChanges, ElementRef } from '@angular/core';\nimport { CovalentSideSheet } from './side-sheet';\nimport { _closeSideSheetVia, CovalentSideSheetRef } from './side-sheet-ref';\n\n/** Counter used to generate unique IDs for dialog elements. */\nlet dialogElementUid = 0;\n\n/**\n * Button that will close the current dialog.\n */\n@Directive({\n  selector: '[td-side-sheet-close], [CovalentSideSheetClose]',\n  exportAs: 'CovalentSideSheetClose',\n  host: {\n    '(click)': '_onButtonClick($event)',\n    '[attr.aria-label]': 'ariaLabel || null',\n    '[attr.type]': 'type',\n  },\n})\nexport class CovalentSideSheetClose implements OnInit, OnChanges {\n  /** Screenreader label for the button. */\n  @Input('aria-label') ariaLabel: string;\n\n  /** Default to \"button\" to prevents accidental form submits. */\n  @Input() type: 'submit' | 'button' | 'reset' = 'button';\n\n  /** Dialog close input. */\n  @Input('td-side-sheet-close') dialogResult: any;\n\n  @Input('CovalentSideSheetClose') _CovalentSideSheetClose: any;\n\n  constructor(\n    @Optional() public dialogRef: CovalentSideSheetRef<any>,\n    private _elementRef: ElementRef<HTMLElement>,\n    private _dialog: CovalentSideSheet,\n  ) {}\n\n  ngOnInit(): void {\n    if (!this.dialogRef) {\n      // When this directive is included in a dialog via TemplateRef (rather than being\n      // in a Component), the DialogRef isn't available via injection because embedded\n      // views cannot be given a custom injector. Instead, we look up the DialogRef by\n      // ID. This must occur in `onInit`, as the ID binding for the dialog container won't\n      // be resolved at constructor time.\n      this.dialogRef = getClosestDialog(this._elementRef, this._dialog.openSideSheets)!;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const proxiedChange = changes['_CovalentSideSheetClose'] || changes['_CovalentSideSheetCloseResult'];\n\n    if (proxiedChange) {\n      this.dialogResult = proxiedChange.currentValue;\n    }\n  }\n\n  _onButtonClick(event: MouseEvent) {\n    // Determinate the focus origin using the click event, because using the FocusMonitor will\n    // result in incorrect origins. Most of the time, close buttons will be auto focused in the\n    // dialog, and therefore clicking the button won't result in a focus change. This means that\n    // the FocusMonitor won't detect any origin change, and will always output `program`.\n    _closeSideSheetVia(\n      this.dialogRef,\n      event.screenX === 0 && event.screenY === 0 ? 'keyboard' : 'mouse',\n      this.dialogResult,\n    );\n  }\n}\n\n/**\n * Title of a side sheet element. Stays fixed to the top of the side sheet when scrolling.\n */\n@Directive({\n  selector: '[td-side-sheet-title], [CovalentSideSheetTitle]',\n  exportAs: 'CovalentSideSheetTitle',\n  host: {\n    'class': 'td-side-sheet-title',\n    '[id]': 'id',\n  },\n})\nexport class CovalentSideSheetTitle implements OnInit {\n  /** Unique id for the dialog title. If none is supplied, it will be auto-generated. */\n  @Input() id: string = `td-side-sheet-title-${dialogElementUid++}`;\n\n  constructor(\n    // The dialog title directive is always used in combination with a `CovalentSideSheetRef`.\n    // tslint:disable-next-line: lightweight-tokens\n    @Optional() private _dialogRef: CovalentSideSheetRef<any>,\n    private _elementRef: ElementRef<HTMLElement>,\n    private _dialog: CovalentSideSheet,\n  ) {}\n\n  ngOnInit(): void {\n    if (this._dialogRef) {\n      Promise.resolve().then(() => {\n        const container = this._dialogRef._containerInstance;\n\n        if (container && !container._ariaLabelledBy) {\n          container._ariaLabelledBy = this.id;\n        }\n      });\n    } else {\n      this._dialogRef = getClosestDialog(this._elementRef, this._dialog.openSideSheets)!;\n    }\n  }\n}\n\n/**\n * Scrollable content container of a dialog.\n */\n@Directive({\n  selector: `[td-side-sheet-content], td-side-sheet-content, [CovalentSideSheetContent]`,\n  host: { class: 'td-side-sheet-content' },\n})\nexport class CovalentSideSheetContent {}\n\n/**\n * Container for the bottom action buttons in a dialog.\n * Stays fixed to the bottom when scrolling.\n */\n@Directive({\n  selector: `[td-side-sheet-actions], td-side-sheet-actions, [CovalentSideSheetActions]`,\n  host: { class: 'td-side-sheet-actions' },\n})\nexport class CovalentSideSheetActions {}\n\n/**\n * Container for the wrapper part of the dialog\n */\n@Directive({\n  selector: `[td-side-sheet-wrapper], td-side-sheet-wrapper, [CovalentSideSheetWrapper]`,\n  host: { class: 'td-side-sheet-wrapper' },\n})\nexport class CovalentSideSheetWrapper {}\n\n/**\n * Finds the closest CovalentSideSheetRef to an element by looking at the DOM.\n * @param element Element relative to which to look for a dialog.\n * @param openDialogs References to the currently-open dialogs.\n */\nfunction getClosestDialog(element: ElementRef<HTMLElement>, openDialogs: CovalentSideSheetRef<any>[]) {\n  let parent: HTMLElement | null = element.nativeElement.parentElement;\n\n  while (parent && !parent.classList.contains('td-side-sheet-container')) {\n    parent = parent.parentElement;\n  }\n\n  return parent ? openDialogs.find((dialog) => dialog.id === parent!.id) : null;\n}\n","import { NgModule } from '@angular/core';\nimport { PortalModule } from '@angular/cdk/portal';\nimport { MatCommonModule } from '@angular/material/core';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { CovalentSideSheet } from './side-sheet';\nimport { CovalentSideSheetContainer } from './side-sheet-container';\nimport {\n  CovalentSideSheetActions,\n  CovalentSideSheetClose,\n  CovalentSideSheetContent,\n  CovalentSideSheetTitle,\n  CovalentSideSheetWrapper,\n} from './side-sheet.content-directives';\n\n@NgModule({\n  declarations: [\n    CovalentSideSheetContainer,\n    CovalentSideSheetActions,\n    CovalentSideSheetClose,\n    CovalentSideSheetContent,\n    CovalentSideSheetTitle,\n    CovalentSideSheetWrapper,\n  ],\n  exports: [\n    CovalentSideSheetActions,\n    CovalentSideSheetClose,\n    CovalentSideSheetContent,\n    CovalentSideSheetTitle,\n    CovalentSideSheetWrapper,\n  ],\n  imports: [PortalModule, MatDialogModule, MatCommonModule],\n  providers: [CovalentSideSheet],\n})\nexport class CovalentSideSheetModule {}\n"],"names":[],"mappings":"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"}