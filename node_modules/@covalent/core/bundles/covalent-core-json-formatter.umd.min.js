!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/material/tooltip"),require("@angular/material/icon"),require("@angular/cdk/bidi"),require("@covalent/core/common")):"function"==typeof define&&define.amd?define("@covalent/core/json-formatter",["exports","@angular/core","@angular/common","@angular/material/tooltip","@angular/material/icon","@angular/cdk/bidi","@covalent/core/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).covalent=e.covalent||{},e.covalent.core=e.covalent.core||{},e.covalent.core["json-formatter"]={}),e.ng.core,e.ng.common,e.ng.material.tooltip,e.ng.material.icon,e.ng.cdk.bidi,e.covalent.core.common)}(this,(function(e,t,r,n,o,a,i){"use strict";var d=function(){function e(e,t){this._changeDetectorRef=e,this._dir=t,this._open=!1,this._levelsOpen=0}return Object.defineProperty(e.prototype,"levelsOpen",{get:function(){return this._levelsOpen},set:function(e){if(!Number.isInteger(e))throw new Error("[levelsOpen] needs to be an integer.");this._levelsOpen=e,this._open=e>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){var t=this._key&&this._key.length>e.KEY_MAX_LENGTH?"…":"";return this._key?this._key.substring(0,e.KEY_MAX_LENGTH)+t:this._key},set:function(e){this._key=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.parseChildren()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRTL",{get:function(){return!!this._dir&&"rtl"===this._dir.dir},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this._changeDetectorRef.markForCheck()},e.prototype.toggle=function(){this._open=!this._open},e.prototype.isObject=function(){return"object"===this.getType(this._data)},e.prototype.isArray=function(){return Array.isArray(this._data)},e.prototype.hasChildren=function(){return this._children&&this._children.length>0},e.prototype.getValue=function(e){var t=this.getType(e);if("undefined"===t||"null"===t)return t;if("date"===t)e=new Date(e).toString();else if("string"===t)e='"'+e+'"';else{if("function"===t)return e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}";if(Array.isArray(e))return this.getObjectName()+" ["+e.length+"]"}return e},e.prototype.getType=function(e){if("object"==typeof e){if(!e)return"null";if(Array.isArray(e))return"object";var t=new Date(e);if("[object Date]"===Object.prototype.toString.call(t)&&!Number.isNaN(t.getTime()))return"date"}return typeof e},e.prototype.getObjectName=function(){var e=this._data;if(this.isObject()&&!e.constructor)return"Object";var t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""},e.prototype.getPreview=function(){var t,r=this,n="{ ",o=" }";this.isArray()?(t=this._data.slice(0,e.PREVIEW_LIMIT).map((function(e){return r.getValue(e)})),n="[",o="]"):t=this._children.slice(0,e.PREVIEW_LIMIT).map((function(e){return e+": "+r.getValue(r._data[e])}));var a=t.join(", "),i=t.length>=e.PREVIEW_LIMIT||a.length>e.PREVIEW_STRING_MAX_LENGTH?"…":"";return n+a.substring(0,e.PREVIEW_STRING_MAX_LENGTH)+i+o},e.prototype.parseChildren=function(){this.isObject()&&(this._children=Object.keys(this._data))},e}();d.KEY_MAX_LENGTH=30,d.PREVIEW_STRING_MAX_LENGTH=80,d.PREVIEW_LIMIT=5,d.decorators=[{type:t.Component,args:[{changeDetection:t.ChangeDetectionStrategy.OnPush,selector:"td-json-formatter",template:'<div class="td-json-formatter-wrapper">\n  <a\n    class="td-key"\n    [class.td-key-node]="hasChildren()"\n    [class.td-key-leaf]="!hasChildren()"\n    [tabIndex]="isObject() ? 0 : -1"\n    (keydown.enter)="toggle()"\n    (click)="toggle()"\n  >\n    <mat-icon class="td-node-icon" *ngIf="hasChildren()">\n      {{ open ? \'keyboard_arrow_down\' : isRTL ? \'keyboard_arrow_left\' : \'keyboard_arrow_right\' }}\n    </mat-icon>\n    <span *ngIf="key" class="key">{{ key }}:</span>\n    <span class="value">\n      <span [class.td-empty]="!hasChildren()" *ngIf="isObject()" [matTooltip]="getPreview()" matTooltipPosition="after">\n        <span class="td-object-name">{{ getObjectName() }}</span>\n        <span class="td-array-length" *ngIf="isArray()">[{{ data.length }}]</span>\n      </span>\n      <span *ngIf="!isObject()" [class]="getType(data)">{{ getValue(data) }}</span>\n    </span>\n  </a>\n  <div class="td-object-children" [@tdCollapse]="!(hasChildren() && open)">\n    <ng-template let-key ngFor [ngForOf]="children">\n      <td-json-formatter [key]="key" [data]="data[key]" [levelsOpen]="levelsOpen - 1"></td-json-formatter>\n    </ng-template>\n  </div>\n</div>\n',animations:[i.tdCollapseAnimation],styles:[":host{display:block}.td-json-formatter-wrapper{padding-bottom:2px;padding-top:2px}.td-json-formatter-wrapper .td-key{-ms-flex-align:start;-ms-flex-direction:row;-ms-flex-line-pack:center;-ms-flex-pack:start;align-content:center;align-items:flex-start;box-sizing:border-box;display:-ms-flexbox;display:flex;flex-direction:row;justify-content:flex-start;max-width:100%}.td-json-formatter-wrapper .td-key.td-key-node:hover{cursor:pointer}.td-json-formatter-wrapper .td-object-children.ng-animating{overflow:hidden}.td-json-formatter-wrapper .td-object-children .td-key,.td-json-formatter-wrapper .td-object-children .td-object-children{padding-left:24px}::ng-deep [dir=rtl] .td-json-formatter-wrapper .td-object-children .td-key,::ng-deep [dir=rtl] .td-json-formatter-wrapper .td-object-children .td-object-children{padding-left:0;padding-right:24px}.td-json-formatter-wrapper .td-object-children .td-key.td-key-leaf,.td-json-formatter-wrapper .td-object-children .td-object-children.td-key-leaf{padding-left:48px}::ng-deep [dir=rtl] .td-json-formatter-wrapper .td-object-children .td-key.td-key-leaf,::ng-deep [dir=rtl] .td-json-formatter-wrapper .td-object-children .td-object-children.td-key-leaf{padding-left:0;padding-right:48px}.td-json-formatter-wrapper .value{margin-left:5px}::ng-deep [dir=rtl] .td-json-formatter-wrapper .value{padding-left:0;padding-right:5px}.td-json-formatter-wrapper .value .td-empty{opacity:.5;text-decoration:line-through}.td-json-formatter-wrapper .value .date,.td-json-formatter-wrapper .value .string{word-break:break-word}"]}]}],d.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:a.Dir,decorators:[{type:t.Optional}]}]},d.propDecorators={levelsOpen:[{type:t.Input,args:["levelsOpen"]}],key:[{type:t.Input,args:["key"]}],data:[{type:t.Input,args:["data"]}]};var l=function(){};l.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,n.MatTooltipModule,o.MatIconModule],declarations:[d],exports:[d]}]}],e.CovalentJsonFormatterModule=l,e.TdJsonFormatterComponent=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=covalent-core-json-formatter.umd.min.js.map